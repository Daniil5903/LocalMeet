@model LocalMeet.ViewModels.EventListViewModel

<form method="get" class="row mb-4">

    <div class="col-md-3">
        <input type="text"
               name="search"
               value="@Model.Search"
               placeholder="Поиск..."
               class="form-control" />
    </div>

    <div class="col-md-3">
        <select name="categoryId" class="form-select">
            <option value="">Все категории</option>
            @foreach (var cat in Model.Categories)
            {
                <option value="@cat.Id"
                        selected="@(Model.SelectedCategoryId == cat.Id)">
                    @cat.Name
                </option>
            }
        </select>
    </div>

    <div class="col-md-2">
        <div class="form-check">
            <input type="checkbox"
                   name="showPast"
                   value="true"
                   class="form-check-input"
                   @(Model.ShowPast ? "checked" : "") />
            <label class="form-check-label">
                Показать прошедшие
            </label>
        </div>
    </div>

    <div class="col-md-2">
        <button type="submit" class="btn btn-primary">
            Фильтр
        </button>
    </div>

</form>

@foreach (var ev in Model.Events)
{
    <div class="card mb-3">
        <div class="card-body">
            <h5>@ev.Title</h5>
            <p>@ev.Description</p>
            <p><strong>Дата:</strong> @ev.Date.ToShortDateString()</p>
            <p><strong>Категория:</strong> @ev.Category?.Name</p>

            <a asp-action="Details"
               asp-route-id="@ev.Id"
               class="btn btn-outline-primary">
                Подробнее
            </a>
        </div>
    </div>
}

<nav>
    <ul class="pagination">

        @for (int i = 1; i <= Model.TotalPages; i++)
        {
            <li class="page-item @(i == Model.Page ? "active" : "")">
                <a class="page-link"
                   asp-action="Index"
                   asp-route-page="@i"
                   asp-route-categoryId="@Model.SelectedCategoryId"
                   asp-route-search="@Model.Search"
                   asp-route-showPast="@Model.ShowPast">
                    @i
                </a>
            </li>
        }

    </ul>
</nav>